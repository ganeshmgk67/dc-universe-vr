<!DOCTYPE html>
<html>
<head>
  <title>VR Superhero Gallery</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

  <script>
    // YOUR ORIGINAL COMPONENT - UNCHANGED
    AFRAME.registerComponent('show-text-and-model', {
      schema: {
        message: { type: 'string' },
        model: { type: 'selector' }
      },
      init: function () {
        this.el.addEventListener('click', () => {
          document.querySelector('#infoText')
            .setAttribute('value', this.data.message);

          document.querySelectorAll('.superhero-model')
            .forEach(m => m.setAttribute('visible', false));

          this.data.model.setAttribute('visible', true);
        });
      }
    });

    // NEW: AR Component - Only hides walls in AR, nothing else changed
    AFRAME.registerComponent('ar-support', {
      init: function () {
        const scene = this.el;
        
        scene.addEventListener('enter-vr', () => {
          if (scene.is('ar-mode')) {
            // Hide walls/floor/ceiling in AR mode only
            document.querySelector('a-sky')?.setAttribute('visible', 'false');
            document.querySelector('a-plane[color="#8F9B78"]')?.setAttribute('visible', 'false');
            document.querySelector('a-plane[color="#FFA4A4"]')?.setAttribute('visible', 'false');
            document.querySelector('a-plane[color="#FFBDBD"]')?.setAttribute('visible', 'false');
            document.querySelector('a-plane[color="#FFD6D6"]')?.setAttribute('visible', 'false');
            document.querySelector('a-plane[color="#FFF5F5"]')?.setAttribute('visible', 'false');
          }
        });

        scene.addEventListener('exit-vr', () => {
          // Show everything again when exiting AR
          document.querySelector('a-sky')?.setAttribute('visible', 'true');
          document.querySelector('a-plane[color="#8F9B78"]')?.setAttribute('visible', 'true');
          document.querySelector('a-plane[color="#FFA4A4"]')?.setAttribute('visible', 'true');
          document.querySelector('a-plane[color="#FFBDBD"]')?.setAttribute('visible', 'true');
          document.querySelector('a-plane[color="#FFD6D6"]')?.setAttribute('visible', 'true');
          document.querySelector('a-plane[color="#FFF5F5"]')?.setAttribute('visible', 'true');
        });
      }
    });
  </script>

  <style>
    /* Simple button - won't affect your VR */
    #vr-ar-button {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 9999;
      padding: 12px 24px;
      background: #8A3324;
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    #vr-ar-button:hover {
      background: #6B281C;
    }
  </style>
</head>
<body>
  <!-- YOUR SCENE - ONLY ADDED ar-support AND webxr, EVERYTHING ELSE IS EXACTLY YOUR CODE -->
  <a-scene background="color: #f2f2f2" 
           cursor="rayOrigin: mouse"
           ar-support
           webxr="optionalFeatures: hit-test;">

    <!-- YOUR EXACT SKY AND WALLS - UNCHANGED -->
    <a-sky color="#f2f2f2"></a-sky>

    <!-- YOUR EXACT ASSETS - UNCHANGED -->
    <a-assets>
      <img id="superman" src="assets/images/superman_logo.jpg">
      <img id="batman" src="assets/images/batman.jpg">
      <img id="flash" src="assets/images/flash_logo.jpeg">
      <img id="greenlantern" src="assets/images/greenlantern_logo.jpg">
      <img id="aquaman" src="assets/images/aqua_logo.jpeg">
      <img id="cyborg" src="assets/images/cyborg_logo.jpeg">
      <img id="shazam" src="assets/images/shazam_logo.jpg">

      <a-asset-item id="supermanModel" src="assets/models/superman.glb"></a-asset-item>
      <a-asset-item id="batmanModel" src="assets/models/batman.glb"></a-asset-item>
      <a-asset-item id="flashModel" src="assets/models/flash.glb"></a-asset-item>
      <a-asset-item id="greenlanternModel" src="assets/models/green_lanter.glb"></a-asset-item>
      <a-asset-item id="aquamanModel" src="assets/models/aquaman.glb"></a-asset-item>
      <a-asset-item id="cyborgModel" src="assets/models/cyborg.glb"></a-asset-item>
      <a-asset-item id="shazamModel" src="assets/models/shazam.glb"></a-asset-item>
    </a-assets>

    <!-- YOUR EXACT CAMERA - UNCHANGED -->
    <a-entity camera position="0 1.6 6" wasd-controls look-controls></a-entity>

    <!-- YOUR EXACT LIGHTS - UNCHANGED -->
    <a-entity light="type: ambient; intensity: 0.6"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="0 5 5"></a-entity>

    <!-- YOUR EXACT FLOOR AND WALLS - UNCHANGED -->
    <a-plane position="0 -1 0" rotation="-90 0 0" width="14" height="14" color="#8F9B78"></a-plane>
    <a-plane position="0 2 -7" width="14" height="6" color="#FFA4A4"></a-plane>
    <a-plane position="-7 2 0" rotation="0 90 0" width="14" height="6" color="#FFBDBD"></a-plane>
    <a-plane position="7 2 0" rotation="0 -90 0" width="14" height="6" color="#FFBDBD"></a-plane>
    <a-plane position="0 2 7" rotation="0 180 0" width="14" height="6" color="#FFD6D6"></a-plane>
    <a-plane position="0 5 0" rotation="90 0 0" width="14" height="14" color="#FFF5F5"></a-plane>

    <!-- YOUR EXACT TEXT - UNCHANGED -->
    <a-text id="infoText"
          value="Click a superhero image"
          position="0 4 -6.9"
          rotation="0 0 0"
          align="center"
          width="15"
          color="#8A3324">
    </a-text>

    <!-- YOUR EXACT MODELS - UNCHANGED -->
    <a-entity id="superman3D" class="superhero-model"
              gltf-model="#supermanModel"
              position="0 0 2"
              scale="0.7 0.7 0.7"
              visible="false"
              animation-mixer
              animation="property: position; dir: alternate; dur: 2000; loop: true; to: 0 0.3 2"
              animation__rotate="property: rotation; dur: 12000; loop: true; to: 0 360 0">
    </a-entity>

    <a-entity id="batman3D" class="superhero-model"
            gltf-model="#batmanModel"
            position="0 0 2"
            scale="1 1 1"
            visible="false"
            animation-mixer
            animation="property: rotation; dur: 25000; loop: true; to: 0 360 0">
    </a-entity>

    <a-entity id="flash3D" class="superhero-model"
              gltf-model="#flashModel"
              position="0 0 2"
              scale="0.6 0.6 0.6"
              visible="false"
              animation-mixer
              rotation="0 0 0"
              animation__run="property: position; dir: alternate; dur: 800; loop: true; to: 0 0 1.2">
    </a-entity>

    <a-entity id="greenlantern3D" class="superhero-model"
              gltf-model="#greenlanternModel"
              position="0 0 2"
              scale="1 1 1"
              visible="false"
              animation-mixer
              animation="property: position; dir: alternate; dur: 3000; loop: true; to: 0 0.2 2"
              animation__rotate="property: rotation; dur: 15000; loop: true; to: 0 360 0">
    </a-entity>

    <a-entity id="aquaman3D" class="superhero-model"
              gltf-model="#aquamanModel"
              position="0 0 2"
              scale="0.8 0.8 0.8"
              visible="false"
              rotation="0 -45 0"
              animation-mixer
              animation="property: position; dir: alternate; dur: 3500; loop: true; to: 0 0.25 2">
    </a-entity>

    <a-entity id="cyborg3D" class="superhero-model"
              gltf-model="#cyborgModel"
              position="0 0 2"
              scale="0.9 0.9 0.9"
              visible="false"
              animation-mixer
              animation="property: rotation; dur: 20000; loop: true; to: 0 360 0">
    </a-entity>

    <a-entity id="shazam3D" class="superhero-model"
              gltf-model="#shazamModel"
              position="0 0 0"
              scale="0.4 0.4 0.4"
              visible="false"
              animation-mixer
              animation="property: position; dir: alternate; dur: 2500; loop: true; to: 0 0.25 2">
    </a-entity>

    <!-- YOUR EXACT IMAGES - UNCHANGED -->
    <a-plane src="#superman" position="-3 1.6 -6.95" width="1.8" height="1.8"
             show-text-and-model="message: Superman â€“ Man of Steel; model: #superman3D"></a-plane>

    <a-plane src="#batman" position="0 1.6 -6.95" width="1.8" height="1.8"
             show-text-and-model="message: Batman â€“ The Dark Knight; model: #batman3D"></a-plane>

    <a-plane src="#flash" position="3 1.6 -6.95" width="1.8" height="1.8"
             show-text-and-model="message: The Flash â€“ Fastest Man Alive; model: #flash3D"></a-plane>

    <a-plane src="#greenlantern" position="-6.8 1.8 -1.5" rotation="0 90 0"
             width="1.8" height="1.8"
             show-text-and-model="message: Green Lantern â€“ Power of Will; model: #greenlantern3D"></a-plane>

    <a-plane src="#aquaman" position="-6.8 1.8 1.5" rotation="0 90 0"
             width="1.8" height="1.8"
             show-text-and-model="message: Aquaman â€“ King of Atlantis; model: #aquaman3D"></a-plane>

    <a-plane src="#cyborg" position="6.8 1.8 -1.5" rotation="0 -90 0"
             width="1.8" height="1.8"
             show-text-and-model="message: Cyborg â€“ Half Man, Half Machine; model: #cyborg3D"></a-plane>

    <a-plane src="#shazam" position="6.8 1.8 1.5" rotation="0 -90 0"
             width="1.8" height="1.8"
             show-text-and-model="message: Shazam â€“ Magic of the Gods; model: #shazam3D"></a-plane>

  </a-scene>

  <!-- SIMPLE BUTTON - Won't affect VR, just helps start AR -->
  <button id="vr-ar-button">Switch to AR (ðŸ“± use on phone)</button>

  <script>
    // Simple button to help start AR - doesn't change your VR code
    document.getElementById('vr-ar-button').addEventListener('click', async () => {
      const scene = document.querySelector('a-scene');
      
      if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
        try {
          if (navigator.xr) {
            const session = await navigator.xr.requestSession('immersive-ar');
            scene.renderer.xr.setSession(session);
          }
        } catch (err) {
          alert('AR failed. Make sure you're on HTTPS and have camera permission.');
        }
      } else {
        alert('ðŸ“± AR only works on phones!\n\n1. Upload this to a HTTPS server\n2. Open on your phone\n3. Click this button again');
      }
    });
  </script>
</body>
</html>